<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Instrument Viewer</title>

<!-- PWA ENABLE -->
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="icon.png">

<style>
html, body {
    margin: 0;
    padding: 0;
    background: black;
    height: 100%;
    width: 100%;
}

/* Full-screen wrapper */
#wrap {
    position: fixed;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: black;
}

/* The cropped LX area at its "design size" */
#video-container {
    position: absolute;
    width: 325px;
    height: 515px;
    overflow: hidden;
    background: black;
    transform-origin: top left;
}

/* Iframe with the VDO.Ninja viewer, offset to show just the instrument */
#video {
    position: absolute;
    top: -155px;
    left: -25px;
    width: 369.5px;
    height: 800px;
    border: none;
}

/* Optional button – can be removed later */
#fsBtn {
    position: fixed;
    top: 20px;
    left: 20px;
    padding: 10px 15px;
    background: rgba(0,0,0,0.6);
    color: white;
    border: 0;
    border-radius: 8px;
    font-size: 24px;
    z-index: 9999;
}
</style>
</head>
<body>

<div id="wrap">
    <div id="video-container">
        <iframe id="video"
                src="https://vdo.ninja/?view=Pp3zQwa"
                allow="camera; microphone"
                allowfullscreen></iframe>
    </div>
</div>

<button id="fsBtn">⛶</button>

<script>
/*
 * Scale the 325x515 crop so the WHOLE thing is visible:
 *  - compute scale for width and height
 *  - use the smaller one (no cropping)
 *  - center horizontally AND vertically
 */
function scaleToScreen() {
    const c = document.getElementById("video-container");
    const cropW = 325;
    const cropH = 515;

    const scaleX = window.innerWidth  / cropW;
    const scaleY = window.innerHeight / cropH;
    const scale  = Math.min(scaleX, scaleY);   // <-- no cropping

    const scaledWidth  = cropW * scale;
    const scaledHeight = cropH * scale;

    const offsetX = (window.innerWidth  - scaledWidth)  / 2;
    const offsetY = (window.innerHeight - scaledHeight) / 2;

    c.style.transformOrigin = "top left";
    c.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
}

window.onload = scaleToScreen;
window.onresize = scaleToScreen;
document.getElementById("fsBtn").onclick = scaleToScreen;

// PWA service worker
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
