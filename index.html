<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Instrument Viewer</title>

<!-- PWA ENABLE -->
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="apple-touch-icon" href="icon.png">

<style>
html, body {
    margin: 0;
    padding: 0;
    background: black;
    height: 100%;
    width: 100%;
}

/* Full-screen wrapper ensuring correct scaling */
#wrap {
    position: fixed;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: black;
}

/* The cropped LX area — native size BEFORE scaling */
#video-container {
    position: absolute;
    width: 325px;
    height: 515px;
    overflow: hidden;
    background: black;
    transform-origin: top left;
}

/* Iframe shows remote video, offset to frame the instrument correctly */
#video {
    position: absolute;
    top: -155px;
    left: -25px;
    width: 369.5px;
    height: 800px;
    border: none;
}

/* Optional fullscreen button (can be removed later) */
#fsBtn {
    position: fixed;
    top: 20px;
    left: 20px;
    padding: 10px 15px;
    background: rgba(0,0,0,0.6);
    color: white;
    border: 0;
    border-radius: 8px;
    font-size: 24px;
    z-index: 9999;
}
</style>
</head>
<body>

<div id="wrap">
    <div id="video-container">
        <iframe id="video"
                src="https://vdo.ninja/?view=Pp3zQwa"
                allow="camera; microphone"
                allowfullscreen></iframe>
    </div>
</div>

<button id="fsBtn">⛶</button>

<script>
/* EXACT scaling logic that worked for the red box */
function scaleToScreen() {
    const c = document.getElementById("video-container");

    const cropW = 325;
    const cropH = 515; // LX native crop height

    const scale = window.innerHeight / cropH;

    const scaledWidth = cropW * scale;
    const offsetX = (window.innerWidth - scaledWidth) / 2;

    c.style.transform = `translateX(${offsetX}px) scale(${scale})`;
}

window.onload = scaleToScreen;
window.onresize = scaleToScreen;

document.getElementById("fsBtn").onclick = scaleToScreen;

if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
